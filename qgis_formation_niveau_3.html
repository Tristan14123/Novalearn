<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation QGIS Niveau 3 - NovaLearn</title>
    <script>
        (function(){
            try {
                var authed = (localStorage.getItem('auth') === '1');
                if (!authed) {
                    try { sessionStorage.setItem('returnAfterLogin', location.pathname.split('/').pop()); } catch(e) {}
                    window.location.href = 'inex.html';
                }
            } catch(e) {
                window.location.href = 'index.html';
            }
        })();
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0b1020;
            --card: #0f162e;
            --muted: #9fb0c7;
            --brand: #22c55e;
            --brand2: #38bdf8;
        }
        
        html, body {
            font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji';
        }
        
        .glass {
            background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
            backdrop-filter: saturate(140%) blur(6px);
        }
        
        .module-content {
            display: none;
        }
        
        .module-content.active {
            display: block;
        }
        
        .nav-item {
            transition: all 0.3s ease;
        }
        
        .nav-item:hover {
            background: rgba(34, 197, 94, 0.1);
            border-color: rgba(34, 197, 94, 0.3);
        }
        
        .nav-item.active {
            background: rgba(34, 197, 94, 0.15);
            border-color: rgba(34, 197, 94, 0.5);
            color: #22c55e;
        }
        
        .progress-bar {
            transition: width 0.3s ease;
        }
        
        .exercise-box {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(56, 189, 248, 0.1));
            border: 1px solid rgba(34, 197, 94, 0.2);
        }
        
        .objectives-box {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(244, 63, 94, 0.1));
            border: 1px solid rgba(168, 85, 247, 0.2);
        }
        
        .note-box {
            background: linear-gradient(135deg, rgba(56, 189, 248, 0.1), rgba(168, 85, 247, 0.1));
            border: 1px solid rgba(56, 189, 248, 0.2);
        }
    </style>
</head>
<body class="bg-[var(--bg)] text-white">
    <!-- Header -->
    <header class="sticky top-0 z-40 border-b border-white/10 bg-[#0b1020]/80 backdrop-blur">
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <a href="index.html" class="flex items-center gap-2">
                    <img src="assets/novalearn-logo.png" alt="NovaLearn" class="h-8 w-8 rounded-xl object-cover" />
                    <span class="font-extrabold tracking-tight">NovaLearn</span>
                </a>
                <div class="hidden sm:block w-px h-6 bg-white/20"></div>
                <h1 class="hidden sm:block text-lg font-semibold">Formation QGIS Niveau 3</h1>
            </div>
            <nav class="hidden md:flex items-center gap-5 text-sm text-white/70">
                <a class="hover:text-white" href="index.html">Accueil</a>
                <a class="hover:text-white" href="qgis_formation_niveau_1.html">Niveau 1</a>
                <a class="hover:text-white" href="qgis_formation_niveau_2.html">Niveau 2</a>
                <a class="text-emerald-300" href="qgis_formation_niveau_3.html">Niveau 3</a>
            </nav>
            <div class="flex items-center gap-4">
                <div class="text-sm text-white/60">
                    <span id="current-module">Introduction</span>
                </div>
                <div class="w-32 h-2 bg-white/10 rounded-full overflow-hidden">
                    <div id="progress-bar" class="h-full bg-emerald-500 progress-bar" style="width:0%"></div>
                </div>
            </div>
        </div>
    </header>

    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <nav class="w-80 border-r border-white/10 bg-[var(--card)]/50 p-6 overflow-y-auto">
            <div class="space-y-2">
                <div class="nav-item active p-3 rounded-xl border border-white/10 cursor-pointer" data-module="intro">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 rounded-lg bg-emerald-500/20 flex items-center justify-center">
                            <span class="text-emerald-400 text-sm font-bold">0</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-sm">Introduction</h3>
                            <p class="text-xs text-white/60">De l'Utilisateur à l'Architecte SIG</p>
                        </div>
                    </div>
                </div>

                <div class="nav-item p-3 rounded-xl border border-white/10 cursor-pointer" data-module="module11">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 rounded-lg bg-sky-500/20 flex items-center justify-center">
                            <span class="text-sky-400 text-sm font-bold">11</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-sm">Modélisateur Graphique</h3>
                            <p class="text-xs text-white/60">Automatisation et flux de travail</p>
                        </div>
                    </div>
                </div>

                <div class="nav-item p-3 rounded-xl border border-white/10 cursor-pointer" data-module="module12">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center">
                            <span class="text-purple-400 text-sm font-bold">12</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-sm">Gestion de Données</h3>
                            <p class="text-xs text-white/60">GeoPackage et Couches Virtuelles</p>
                        </div>
                    </div>
                </div>

                <div class="nav-item p-3 rounded-xl border border-white/10 cursor-pointer" data-module="module13">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 rounded-lg bg-pink-500/20 flex items-center justify-center">
                            <span class="text-pink-400 text-sm font-bold">13</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-sm">Analyse Spatiale</h3>
                            <p class="text-xs text-white/60">Jointures et sélections spatiales</p>
                        </div>
                    </div>
                </div>

                <div class="nav-item p-3 rounded-xl border border-white/10 cursor-pointer" data-module="module14">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 rounded-lg bg-orange-500/20 flex items-center justify-center">
                            <span class="text-orange-400 text-sm font-bold">14</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-sm">Algèbre de Carte</h3>
                            <p class="text-xs text-white/60">Calculatrice Raster avancée</p>
                        </div>
                    </div>
                </div>

                <div class="nav-item p-3 rounded-xl border border-white/10 cursor-pointer" data-module="module15">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 rounded-lg bg-teal-500/20 flex items-center justify-center">
                            <span class="text-teal-400 text-sm font-bold">15</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-sm">Bases de Données</h3>
                            <p class="text-xs text-white/60">Introduction à PostGIS</p>
                        </div>
                    </div>
                </div>

                <div class="nav-item p-3 rounded-xl border border-white/10 cursor-pointer" data-module="conclusion">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 rounded-lg bg-green-500/20 flex items-center justify-center">
                            <span class="text-green-400 text-sm font-bold">✓</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-sm">Conclusion</h3>
                            <p class="text-xs text-white/60">Vers l'expertise SIG</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 p-4 rounded-xl glass border border-white/10">
                <h4 class="font-semibold text-sm mb-2">Progression</h4>
                <div class="text-xs text-white/60 mb-2">Modules complétés: <span id="completed-count">0</span>/6</div>
                <div class="w-full h-2 bg-white/10 rounded-full overflow-hidden">
                    <div id="sidebar-progress" class="h-full bg-emerald-500" style="width:0%"></div>
                </div>
            </div>
        </nav>

        <!-- Main content -->
        <main class="flex-1 p-8 overflow-y-auto">
            <!-- Intro -->
            <section id="intro" class="module-content active max-w-4xl">
                <div class="mb-8">
                    <h1 class="text-4xl font-bold mb-4">Formation QGIS Niveau 3 : Automatisation, Analyse Complexe et Gestion de Données Professionnelle</h1>
                    <p class="text-xl text-white/80 mb-6">De l'Utilisateur à l'Architecte SIG</p>

                    <div class="objectives-box rounded-2xl p-6 mb-8">
                        <h2 class="text-xl font-semibold mb-3 text-purple-300">🎯 Objectif du niveau</h2>
                        <p class="text-white/90">Vous avez atteint un niveau où l'utilisation de QGIS est devenue une seconde nature. Le défi n'est plus de savoir "comment faire", mais "comment faire mieux, plus vite et de manière plus fiable". Ce Niveau 3 est conçu pour vous transformer en un véritable architecte de vos analyses géospatiales.</p>
                    </div>

                    <div class="note-box rounded-2xl p-6">
                        <h3 class="font-semibold mb-3 text-sky-300">💡 Approche pédagogique</h3>
                        <p class="text-white/80">Nous allons nous concentrer sur <strong>l'automatisation</strong> pour éliminer les tâches répétitives, sur les <strong>analyses complexes</strong> pour répondre à des questions à forte valeur ajoutée, et sur les <strong>standards de gestion de données</strong> pour garantir la robustesse de vos projets.</p>
                    </div>

                    <div class="mt-8 text-center">
                        <button onclick="nextModule()" class="px-6 py-3 bg-emerald-500 hover:bg-emerald-400 text-black font-semibold rounded-xl">Commencer le Module 11</button>
                    </div>
                </div>
            </section>

            <!-- Module 11 -->
            <section id="module11" class="module-content max-w-4xl">
                <h1 class="text-3xl font-bold mb-2">Module 11 : L'Automatisation avec le Modélisateur Graphique</h1>
                <div class="objectives-box rounded-2xl p-6 mb-6">
                    <h2 class="text-lg font-semibold mb-2 text-purple-300">🎯 Objectifs Pédagogiques</h2>
                    <ul class="list-disc list-inside text-white/80 text-sm space-y-1">
                        <li>Concevoir un flux de travail (workflow) analytique</li>
                        <li>Créer un modèle de géotraitement personnalisé et réutilisable</li>
                        <li>Paramétrer un modèle pour le rendre flexible et partageable</li>
                    </ul>
                </div>

                <div class="glass rounded-xl p-6 border border-white/10 mb-6">
                    <h3 class="text-xl font-semibold mb-3 text-white">11.1. Pourquoi automatiser ?</h3>
                    <p class="text-white/90 mb-4">Imaginez que chaque mois, vous recevez de nouvelles données et devez effectuer la même série de 10 opérations (tampon, découpage, jointure, etc.) pour produire un rapport. C'est long, fastidieux et source d'erreurs. Le modélisateur graphique vous permet d'encapsuler cette chaîne de traitement dans un seul outil personnalisé.</p>
                    
                    <h3 class="text-xl font-semibold mb-3 text-white mt-6">11.2. L'interface du Modélisateur</h3>
                    <p class="text-white/90 mb-4">Allez dans <strong>Traitement > Modélisateur Graphique</strong>. Vous découvrez une interface visuelle :</p>
                    <ul class="list-disc list-inside text-white/80 space-y-1 mb-4">
                        <li><strong>À gauche</strong> : Les briques de construction.</li>
                        <li><strong>Entrées</strong> : Les données que votre modèle demandera à l'utilisateur (une couche vecteur, un nombre pour une distance, un mot pour un nom de fichier...).</li>
                        <li><strong>Algorithmes</strong> : La liste de tous les outils de géotraitement de QGIS (Tampon, Découper...).</li>
                        <li><strong>Au centre</strong> : Le canevas où vous allez construire votre "organigramme" d'analyse.</li>
                    </ul>

                    <h3 class="text-xl font-semibold mb-3 text-white mt-6">11.3. Construire un premier modèle</h3>
                    <p class="text-white/90 mb-2"><strong>Scénario</strong> : Créer un outil qui, pour une couche de points donnée (ex: des entreprises), crée une zone d'influence et compte combien de bâtiments se trouvent à l'intérieur.</p>
                    
                    <p class="text-white/90 mb-2"><strong>1. Définir les entrées :</strong></p>
                    <ul class="list-disc list-inside text-white/80 space-y-1 mb-4 ml-4">
                        <li>Dans le panneau <strong>Entrées</strong>, double-cliquez sur <strong>Couche vecteur</strong>. Nommez-la <code class="bg-white/10 px-1 rounded">Entreprises</code>.</li>
                        <li>Faites de même pour une autre couche vecteur nommée <code class="bg-white/10 px-1 rounded">Bâtiments</code>.</li>
                        <li>Double-cliquez sur <strong>Nombre</strong>. Nommez-le <code class="bg-white/10 px-1 rounded">Distance d'influence</code>.</li>
                    </ul>

                    <p class="text-white/90 mb-2"><strong>2. Ajouter les algorithmes :</strong></p>
                    <ul class="list-disc list-inside text-white/80 space-y-1 mb-4 ml-4">
                        <li>Dans le panneau <strong>Algorithmes</strong>, cherchez et glissez l'outil <strong>Tampon</strong> sur le canevas.</li>
                        <li>Dans sa configuration, pour le champ <strong>Couche source</strong>, choisissez <strong>Entrée du modèle</strong> et sélectionnez <code class="bg-white/10 px-1 rounded">Entreprises</code>.</li>
                        <li>Pour <strong>Distance</strong>, choisissez <strong>Entrée du modèle</strong> et <code class="bg-white/10 px-1 rounded">Distance d'influence</code>.</li>
                        <li>Maintenant, glissez l'algorithme <strong>Compter les points dans un polygone</strong> sur le canevas.</li>
                        <li>Pour <strong>Polygones</strong>, choisissez <strong>Sortie de l'algorithme</strong> et sélectionnez la sortie <strong>Tampon</strong>.</li>
                        <li>Pour <strong>Points</strong>, choisissez <strong>Entrée du modèle</strong> et <code class="bg-white/10 px-1 rounded">Bâtiments</code>.</li>
                    </ul>

                    <p class="text-white/90 mb-4"><strong>3. Définir la sortie</strong> : Le résultat du comptage est notre sortie finale. Nommez-la <code class="bg-white/10 px-1 rounded">Résultat analyse influence</code>.</p>
                    
                    <p class="text-white/90 mb-4"><strong>4. Enregistrer le modèle</strong> : Donnez un nom à votre modèle (ex: "Analyse d'influence"). Il sera désormais disponible dans votre <strong>Boîte à outils de Traitements</strong> comme n'importe quel autre outil !</p>
                    
                    <div class="note-box rounded-xl p-4 mt-6">
                        <h4 class="font-semibold text-sky-300 mb-2">📚 Analogie Pédagogique : La Recette de Cuisine Visuelle</h4>
                        <p class="text-white/80 text-sm">Le modélisateur graphique est comme créer une fiche recette illustrée. Les <strong>Entrées</strong> sont les ingrédients que vous listez au début (1 kg de farine, 2 œufs...). Les <strong>Algorithmes</strong> sont les étapes de la recette (Mélanger, Cuire au four...). Vous connectez les étapes entre elles : le résultat du "Mélange" devient l'entrée de l'étape "Cuire". Une fois la fiche créée, n'importe qui peut refaire votre plat à l'identique, simplement en fournissant les bons ingrédients.</p>
                    </div>
                </div>

                <div class="exercise-box rounded-xl p-6">
                    <h3 class="font-semibold mb-3 text-emerald-300">🏋️ Exercice Pratique 8</h3>
                    <p class="text-white/90 mb-4">Créez un modèle qui prend en entrée une couche de polygones (ex: communes) et une couche de lignes (ex: rivières).</p>
                    <p class="text-white/90 mb-3">Le modèle doit :</p>
                    <ol class="list-decimal list-inside text-white/90 space-y-2">
                        <li>Découper les rivières pour ne garder que les tronçons à l'intérieur des communes</li>
                        <li>Calculer la longueur totale des rivières pour chaque commune</li>
                    </ol>
                    <p class="text-white/70 text-sm mt-3">💡 <strong>Indice</strong> : Vous aurez besoin des algorithmes <strong>Découper</strong> et <strong>Statistiques par zone</strong>.</p>
                </div>

                <div class="mt-8 flex justify-between">
                    <button onclick="prevModule()" class="px-4 py-2 border border-white/20 hover:bg-white/10 rounded-lg">← Précédent</button>
                    <button onclick="nextModule()" class="px-6 py-2 bg-emerald-500 hover:bg-emerald-400 text-black font-semibold rounded-lg">Module 12 →</button>
                </div>
            </section>

            <!-- Module 12 -->
            <section id="module12" class="module-content max-w-4xl">
                <h1 class="text-3xl font-bold mb-2">Module 12 : Gestion de Données avec GeoPackage et Couches Virtuelles</h1>
                <div class="objectives-box rounded-2xl p-6 mb-6">
                    <h2 class="text-lg font-semibold mb-2 text-purple-300">🎯 Objectifs Pédagogiques</h2>
                    <ul class="list-disc list-inside text-white/80 text-sm space-y-1">
                        <li>Comprendre les avantages du format GeoPackage</li>
                        <li>Maîtriser la création et la gestion de bases de données spatiales</li>
                        <li>Utiliser efficacement les couches virtuelles pour des performances optimales</li>
                    </ul>
                </div>

                <div class="glass rounded-xl p-6 border border-white/10 mb-6">
                    <h3 class="text-xl font-semibold mb-3 text-white">12.1. Pourquoi GeoPackage ?</h3>
                    <p class="text-white/90 mb-4">Le GeoPackage est un format standard ouvert basé sur SQLite qui stocke des données géospatiales (vecteurs, rasters, tuiles) dans un seul fichier. C'est le format recommandé par l'OGC (Open Geospatial Consortium) pour échanger des données géographiques.</p>
                    
                    <div class="note-box rounded-xl p-4 my-4">
                        <h4 class="font-semibold text-sky-300 mb-2">💡 Avantages du GeoPackage</h4>
                        <ul class="list-disc list-inside text-white/80 text-sm space-y-1">
                            <li><strong>Un seul fichier</strong> pour toutes vos données (contrairement au Shapefile qui en nécessite plusieurs)</li>
                            <li><strong>Pas de limite de taille</strong> de fichier (contrairement au Shapefile limité à 2 Go)</li>
                            <li>Support <strong>natif des projections</strong> (pas besoin de fichiers .prj)</li>
                            <li>Stockage <strong>efficace</strong> avec compression intégrée</li>
                            <li>Support des <strong>métadonnées</strong> complètes</li>
                        </ul>
                    </div>

                    <h3 class="text-xl font-semibold mb-3 text-white mt-6">12.2. Créer et gérer un GeoPackage</h3>
                    <p class="text-white/90 mb-2"><strong>Créer un nouveau GeoPackage :</strong></p>
                    <ol class="list-decimal list-inside text-white/80 space-y-2 mb-4 ml-4">
                        <li>Cliquez sur <strong>Couche > Créer une couche > Nouvelle couche GeoPackage</strong></li>
                        <li>Choisissez un emplacement et un nom pour votre fichier .gpkg</li>
                        <li>Définissez le système de référence de coordonnées (ex: EPSG:2154 pour RGF93/Lambert-93)</li>
                        <li>Ajoutez des champs à votre table (ex: nom, type, superficie...)</li>
                        <li>Cliquez sur <strong>OK</strong> pour créer la couche</li>
                    </ol>

                    <p class="text-white/90 mb-2 mt-6"><strong>Importer des données existantes :</strong></p>
                    <ol class="list-decimal list-inside text-white/80 space-y-2 mb-4 ml-4">
                        <li>Faites un clic droit sur une couche dans la table des matières</li>
                        <li>Sélectionnez <strong>Exporter > Sauvegarder les entités sous...</strong></li>
                        <li>Choisissez <strong>GeoPackage</strong> comme format</li>
                        <li>Sélectionnez votre fichier .gpkg existant ou créez-en un nouveau</li>
                        <li>Nommez votre couche et cliquez sur <strong>OK</strong></li>
                    </ol>

                    <h3 class="text-xl font-semibold mb-3 text-white mt-6">12.3. Les Couches Virtuelles</h3>
                    <p class="text-white/90 mb-4">Les couches virtuelles sont des vues SQL qui permettent de créer des représentations personnalisées de vos données sans les dupliquer. Elles sont particulièrement utiles pour :</p>
                    <ul class="list-disc list-inside text-white/80 space-y-1 mb-4">
                        <li>Combiner plusieurs couches en une seule vue</li>
                        <li>Créer des filtres complexes</li>
                        <li>Effectuer des jointures entre tables</li>
                        <li>Créer des géométries à la volée</li>
                    </ul>

                    <p class="text-white/90 mb-2"><strong>Créer une couche virtuelle :</strong></p>
                    <ol class="list-decimal list-inside text-white/80 space-y-2 mb-4 ml-4">
                        <li>Allez dans <strong>Couche > Créer une couche > Nouvelle couche virtuelle</strong></li>
                        <li>Dans l'onglet <strong>Couches sources</strong>, sélectionnez les couches à inclure</li>
                        <li>Passez à l'onglet <strong>Requête</strong> et écrivez votre requête SQL</li>
                        <li>Cliquez sur <strong>Exécuter</strong> pour tester votre requête</li>
                        <li>Cliquez sur <strong>Ajouter</strong> pour créer la couche virtuelle</li>
                    </ol>

                    <div class="note-box rounded-xl p-4 mt-6">
                        <h4 class="font-semibold text-sky-300 mb-2">📚 Exemple Pratique : Jointure Spatiale avec Vue Virtuelle</h4>
                        <p class="text-white/80 text-sm mb-2">Supposons que vous ayez deux couches : <code class="bg-white/10 px-1 rounded">communes</code> et <code class="bg-white/10 px-1 rounded">commerces</code>. Vous voulez compter le nombre de commerces par commune :</p>
                        <pre class="bg-black/30 p-3 rounded-lg text-xs text-green-300 overflow-x-auto mt-2">
SELECT 
    c.id, 
    c.nom, 
    c.geometry,
    COUNT(co.id) AS nb_commerces
FROM 
    communes c
LEFT JOIN 
    commerces co ON st_contains(c.geometry, co.geometry)
GROUP BY 
    c.id, c.nom, c.geometry</pre>
                        <p class="text-white/80 text-sm mt-2">Cette requête crée une nouvelle couche avec toutes les communes et le nombre de commerces qu'elles contiennent.</p>
                    </div>
                </div>

                <div class="exercise-box rounded-xl p-6">
                    <h3 class="font-semibold mb-3 text-emerald-300">🏋️ Exercice Pratique 9</h3>
                    <p class="text-white/90 mb-4">Créez un GeoPackage contenant deux couches :</p>
                    <ol class="list-decimal list-inside text-white/90 space-y-2">
                        <li>Une couche de points représentant des équipements sportifs avec les champs : nom, type, date_creation</li>
                        <li>Une couche de polygones représentant des quartiers avec les champs : nom, population, superficie</li>
                        <li>Créez une couche virtuelle qui calcule pour chaque quartier :
                            <ul class="list-disc list-inside ml-6 mt-2 space-y-1">
                                <li>Le nombre d'équipements sportifs</li>
                                <li>Le nombre d'équipements sportifs pour 1000 habitants</li>
                            </ul>
                        </li>
                    </ol>
                    <p class="text-white/70 text-sm mt-3">💡 <strong>Indice</strong> : Utilisez les fonctions SQL <code class="bg-white/10 px-1 rounded">COUNT()</code> pour compter et <code class="bg-white/10 px-1 rounded">ST_Contains()</code> pour les relations spatiales.</p>
                </div>

                <div class="mt-8 flex justify-between">
                    <button onclick="prevModule()" class="px-4 py-2 border border-white/20 hover:bg-white/10 rounded-lg">← Module 11</button>
                    <button onclick="nextModule()" class="px-6 py-2 bg-emerald-500 hover:bg-emerald-400 text-black font-semibold rounded-lg">Module 13 →</button>
                </div>
            </section>

            <!-- Module 13 -->
            <section id="module13" class="module-content max-w-4xl">
                <h1 class="text-3xl font-bold mb-2">Module 13 : Analyse Spatiale - Jointures et Sélections</h1>
                <div class="objectives-box rounded-2xl p-6 mb-6">
                    <h2 class="text-lg font-semibold mb-2 text-purple-300">🎯 Objectifs Pédagogiques</h2>
                    <ul class="list-disc list-inside text-white/80 text-sm space-y-1">
                        <li>Maîtriser les différents types de relations spatiales</li>
                        <li>Effectuer des jointures spatiales avancées</li>
                        <li>Optimiser les sélections spatiales pour des analyses complexes</li>
                    </ul>
                </div>

                <div class="glass rounded-xl p-6 border border-white/10 mb-6">
                    <h3 class="text-xl font-semibold mb-3 text-white">13.1. Les Relations Spatiales Fondamentales</h3>
                    <p class="text-white/90 mb-4">En analyse spatiale, comprendre comment les entités géographiques interagissent entre elles est crucial. Voici les principales relations spatiales :</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="border border-white/10 p-4 rounded-lg">
                            <h4 class="font-semibold text-sky-300 mb-2">🔷 Contient (Contains)</h4>
                            <p class="text-white/80 text-sm">Une entité A contient une entité B si B est entièrement à l'intérieur de A.</p>
                            <code class="text-xs block mt-2 bg-black/30 p-2 rounded">ST_Contains(A, B)</code>
                        </div>
                        <div class="border border-white/10 p-4 rounded-lg">
                            <h4 class="font-semibold text-sky-300 mb-2">🔷 Intersecte (Intersects)</h4>
                            <p class="text-white/80 text-sm">Deux entités partagent au moins un point en commun.</p>
                            <code class="text-xs block mt-2 bg-black/30 p-2 rounded">ST_Intersects(A, B)</code>
                        </div>
                        <div class="border border-white/10 p-4 rounded-lg">
                            <h4 class="font-semibold text-sky-300 mb-2">🔷 Dans (Within)</h4>
                            <p class="text-white/80 text-sm">L'inverse de contient - A est entièrement dans B.</p>
                            <code class="text-xs block mt-2 bg-black/30 p-2 rounded">ST_Within(A, B)</code>
                        </div>
                        <div class="border border-white/10 p-4 rounded-lg">
                            <h4 class="font-semibold text-sky-300 mb-2">🔷 Distance (DWithin)</h4>
                            <p class="text-white/80 text-sm">Les entités sont à une certaine distance l'une de l'autre.</p>
                            <code class="text-xs block mt-2 bg-black/30 p-2 rounded">ST_DWithin(A, B, distance)</code>
                        </div>
                    </div>

                    <h3 class="text-xl font-semibold mb-3 text-white mt-6">13.2. Jointures Spatiales avec le Gestionnaire de Traitements</h3>
                    <p class="text-white/90 mb-4">Les jointures spatiales vous permettent de combiner des attributs de deux couches en fonction de leur relation spatiale :</p>
                    
                    <p class="text-white/90 mb-2"><strong>Étapes pour une jointure spatiale :</strong></p>
                    <ol class="list-decimal list-inside text-white/80 space-y-2 mb-4 ml-4">
                        <li>Ouvrez le <strong>Gestionnaire de traitements</strong> (Ctrl+Alt+T)</li>
                        <li>Recherchez et double-cliquez sur <strong>Jointure par localisation</strong> (ou <em>Join attributes by location</em>)</li>
                        <li>Remplissez les paramètres :
                            <ul class="list-disc list-inside ml-6 mt-1 space-y-1">
                                <li><strong>Couche d'entités</strong> : Votre couche cible</li>
                                <li><strong>Couche de jointure</strong> : La couche dont vous voulez les attributs</li>
                                <li><strong>Prédicats géométriques</strong> : Les relations spatiales à utiliser</li>
                                <li><strong>Type de jointure</strong> : Créer des entités séparées pour chaque entité correspondante (one to many) ou ne conserver que les correspondances (take attributes of the first located feature)</li>
                            </ul>
                        </li>
                    </ol>

                    <div class="note-box rounded-xl p-4 my-6">
                        <h4 class="font-semibold text-sky-300 mb-2">💡 Bonne Pratique : Jointure vs Sélection</h4>
                        <p class="text-white/80 text-sm">Utilisez une <strong>jointure spatiale</strong> quand vous avez besoin des attributs des deux couches. Utilisez une <strong>sélection par localisation</strong> quand vous voulez juste identifier les entités qui ont une certaine relation spatiale.</p>
                    </div>

                    <h3 class="text-xl font-semibold mb-3 text-white mt-6">13.3. Sélections Spatiales Avancées</h3>
                    <p class="text-white/90 mb-4">Les sélections spatiales vous permettent d'identifier rapidement des entités en fonction de leur relation avec d'autres entités :</p>
                    
                    <p class="text-white/90 mb-2"><strong>Méthodes de sélection :</strong></p>
                    <ul class="list-disc list-inside text-white/80 space-y-2 mb-4">
                        <li><strong>Sélection par localisation</strong> : <code class="bg-white/10 px-1 rounded">Vecteur > Outils de recherche > Sélection par localisation</code></li>
                        <li><strong>Requête spatiale</strong> : <code class="bg-white/10 px-1 rounded">Filtre > Filtre par géométrie</code></li>
                        <li><strong>Requête avec expressions</strong> : Utilisez les fonctions spatiales dans la calculatrice de champs</li>
                    </ul>

                    <div class="note-box rounded-xl p-4 mt-6">
                        <h4 class="font-semibold text-sky-300 mb-2">📚 Exemple Pratique : Analyse de Zone de Chalandise</h4>
                        <p class="text-white/80 text-sm mb-2">Supposons que vous ayez :</p>
                        <ul class="list-disc list-inside text-white/80 text-sm space-y-1 mb-3">
                            <li>Une couche de points <code class="bg-white/10 px-1 rounded">magasins</code></li>
                            <li>Une couche de polygones <code class="bg-white/10 px-1 rounded">zones_urbaines</code></li>
                            <li>Une couche de points <code class="bg-white/10 px-1 rounded">clients</code></li>
                        </ul>
                        <p class="text-white/80 text-sm mb-2">Vous pouvez identifier les clients potentiels dans un rayon de 2km autour de chaque magasin :</p>
                        <pre class="bg-black/30 p-3 rounded-lg text-xs text-green-300 overflow-x-auto mt-2">
-- Dans la calculatrice d'expressions
WITH buffer AS (
    SELECT ST_Buffer(geometry, 2000) AS geom 
    FROM magasins 
    WHERE id = 1
)
SELECT c.* 
FROM clients c, buffer b
WHERE ST_Within(c.geometry, b.geom);</pre>
                    </div>
                </div>

                <div class="exercise-box rounded-xl p-6">
                    <h3 class="font-semibold mb-3 text-emerald-300">🏋️ Exercice Pratique 10</h3>
                    <p class="text-white/90 mb-4">Avec les données fournies :</p>
                    <ol class="list-decimal list-inside text-white/90 space-y-2">
                        <li>Créez une zone tampon de 500m autour des arrêts de bus</li>
                        <li>Identifiez tous les bâtiments résidentiels situés à moins de 300m d'un arrêt de bus</li>
                        <li>Calculez la population totale desservie par chaque arrêt de bus (en supposant que chaque bâtiment a un attribut 'population')</li>
                        <li>Créez une nouvelle couche avec les arrêts de bus, enrichie de l'information sur la population desservie</li>
                    </ol>
                    <p class="text-white/70 text-sm mt-3">💡 <strong>Indice</strong> : Utilisez d'abord une sélection spatiale pour identifier les bâtiments à proximité, puis une jointure spatiale pour agréger les données.</p>
                </div>

                <div class="mt-8 flex justify-between">
                    <button onclick="prevModule()" class="px-4 py-2 border border-white/20 hover:bg-white/10 rounded-lg">← Module 12</button>
                    <button onclick="nextModule()" class="px-6 py-2 bg-emerald-500 hover:bg-emerald-400 text-black font-semibold rounded-lg">Module 14 →</button>
                </div>
            </section>

            <!-- Module 14 -->
            <section id="module14" class="module-content max-w-4xl">
                <h1 class="text-3xl font-bold mb-2">Module 14 : Algèbre de Carte - Analyse Raster Avancée</h1>
                <div class="objectives-box rounded-2xl p-6 mb-6">
                    <h2 class="text-lg font-semibold mb-2 text-purple-300">🎯 Objectifs Pédagogiques</h2>
                    <ul class="list-disc list-inside text-white/80 text-sm space-y-1">
                        <li>Maîtriser les opérations d'algèbre de carte</li>
                        <li>Effectuer des analyses raster complexes</li>
                        <li>Automatiser des traitements raster avec le modeleur graphique</li>
                    </ul>
                </div>

                <div class="glass rounded-xl p-6 border border-white/10 mb-6">
                    <h3 class="text-xl font-semibold mb-3 text-white">14.1. Introduction à l'Algèbre de Carte</h3>
                    <p class="text-white/90 mb-4">L'algèbre de carte est un langage puissant pour effectuer des analyses spatiales avancées sur des données raster. Elle permet de combiner plusieurs couches raster à l'aide d'opérateurs mathématiques et logiques.</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="border border-white/10 p-4 rounded-lg">
                            <h4 class="font-semibold text-sky-300 mb-2">🔢 Opérateurs de Base</h4>
                            <ul class="text-white/80 text-sm space-y-1">
                                <li><code>+</code> Addition</li>
                                <li><code>-</code> Soustraction</li>
                                <li><code>*</code> Multiplication</li>
                                <li><code>/</code> Division</li>
                                <li><code>^</code> Puissance</li>
                            </ul>
                        </div>
                        <div class="border border-white/10 p-4 rounded-lg">
                            <h4 class="font-semibold text-sky-300 mb-2">🧮 Fonctions Avancées</h4>
                            <ul class="text-white/80 text-sm space-y-1">
                                <li><code>sqrt()</code> Racine carrée</li>
                                <li><code>log10()</code> Logarithme base 10</li>
                                <li><code>sin()</code>, <code>cos()</code> Fonctions trigonométriques</li>
                                <li><code>if()</code> Conditions</li>
                            </ul>
                        </div>
                    </div>

                    <h3 class="text-xl font-semibold mb-3 text-white mt-6">14.2. La Calculatrice Raster</h3>
                    <p class="text-white/90 mb-4">La calculatrice raster de QGIS est l'outil principal pour effectuer des opérations d'algèbre de carte :</p>
                    
                    <p class="text-white/90 mb-2"><strong>Accès :</strong></p>
                    <ol class="list-decimal list-inside text-white/80 space-y-2 mb-4 ml-4">
                        <li>Ouvrez la <strong>Boîte à outils de traitements</strong> (Ctrl+Alt+T)</li>
                        <li>Recherchez <strong>Calculatrice raster</strong></li>
                        <li>Sélectionnez la couche d'entrée</li>
                        <li>Définissez l'emplacement de sortie</li>
                        <li>Écrivez votre expression dans la zone de texte</li>
                    </ol>

                    <div class="note-box rounded-xl p-4 my-6">
                        <h4 class="font-semibold text-sky-300 mb-2">💡 Exemple d'Expression</h4>
                        <p class="text-white/80 text-sm">Pour calculer un indice de végétation (NDVI) à partir de bandes NIR et Rouge :</p>
                        <pre class="bg-black/30 p-3 rounded-lg text-xs text-green-300 overflow-x-auto mt-2">( "NIR@1" - "RED@1" ) / ( "NIR@1" + "RED@1" )</pre>
                        <p class="text-white/80 text-sm mt-2">Où <code class="bg-white/10 px-1 rounded">@1</code> se réfère au numéro de bande (1 pour la première bande)</p>
                    </div>

                    <h3 class="text-xl font-semibold mb-3 text-white mt-6">14.3. Opérations Conditionnelles</h3>
                    <p class="text-white/90 mb-4">Les opérations conditionnelles permettent d'appliquer des traitements différents selon des conditions spécifiques :</p>
                    
                    <p class="text-white/90 mb-2"><strong>Structure :</strong></p>
                    <pre class="bg-black/30 p-3 rounded-lg text-xs text-green-300 overflow-x-auto mb-4">if(condition, valeur_si_vrai, valeur_si_faux)</pre>
                    
                    <div class="note-box rounded-xl p-4 my-6">
                        <h4 class="font-semibold text-sky-300 mb-2">📚 Exemple Pratique : Classification Binaire</h4>
                        <p class="text-white/80 text-sm">Pour classer un MNT en pentes fortes (>30°) et faibles (≤30°) :</p>
                        <pre class="bg-black/30 p-3 rounded-lg text-xs text-green-300 overflow-x-auto mt-2">if(slope("mnt@1") > 30, 1, 0)</pre>
                        <p class="text-white/80 text-sm mt-2">Cette expression crée une nouvelle couche binaire où 1 = pente forte et 0 = pente faible</p>
                    </div>

                    <h3 class="text-xl font-semibold mb-3 text-white mt-6">14.4. Automatisation avec le Modeleur Graphique</h3>
                    <p class="text-white/90 mb-4">Vous pouvez enregistrer vos calculs complexes dans le modeleur graphique pour les réutiliser :</p>
                    
                    <ol class="list-decimal list-inside text-white/80 space-y-2 mb-4 ml-4">
                        <li>Ouvrez le <strong>Modeleur graphique</strong> depuis le menu Traitement</li>
                        <li>Ajoutez une entrée de type <strong>Raster</strong> pour chaque couche d'entrée</li>
                        <li>Ajoutez l'algorithme <strong>Calculatrice raster</strong></li>
                        <li>Configurez les paramètres et liez les entrées</li>
                        <li>Définissez les sorties et enregistrez le modèle</li>
                    </ol>
                </div>

                <div class="exercise-box rounded-xl p-6">
                    <h3 class="font-semibold mb-3 text-emerald-300">🏋️ Exercice Pratique 11</h3>
                    <p class="text-white/90 mb-4">Avec les données fournies (MNT, occupation du sol, précipitations) :</p>
                    <ol class="list-decimal list-inside text-white/90 space-y-2">
                        <li>Calculez un indice d'érosion potentielle en utilisant la formule :<br>
                            <code class="bg-white/10 px-1 rounded">Erosion = Pente * Facteur_Occupation * Précipitation</code>
                        </li>
                        <li>Classez les zones en trois catégories de risque :
                            <ul class="list-disc list-inside ml-6 mt-1 space-y-1">
                                <li>Faible : Érosion < 25</li>
                                <li>Moyen : 25 ≤ Érosion < 50</li>
                                <li>Élevé : Érosion ≥ 50</li>
                            </ul>
                        </li>
                        <li>Créez un modèle réutilisable pour cette analyse</li>
                    </ol>
                    <p class="text-white/70 text-sm mt-3">💡 <strong>Indice</strong> : Utilisez des opérations conditionnelles imbriquées pour la classification.</p>
                </div>

                <div class="mt-8 flex justify-between">
                    <button onclick="prevModule()" class="px-4 py-2 border border-white/20 hover:bg-white/10 rounded-lg">← Module 13</button>
                    <button onclick="nextModule()" class="px-6 py-2 bg-emerald-500 hover:bg-emerald-400 text-black font-semibold rounded-lg">Module 15 →</button>
                </div>
            </section>

            <!-- Module 15 -->
            <section id="module15" class="module-content max-w-4xl">
                <h1 class="text-3xl font-bold mb-2">Module 15 : Bases de Données Spatiales avec PostgreSQL/PostGIS</h1>
                <div class="objectives-box rounded-2xl p-6 mb-6">
                    <h2 class="text-lg font-semibold mb-2 text-purple-300">🎯 Objectifs Pédagogiques</h2>
                    <ul class="list-disc list-inside text-white/80 text-sm space-y-1">
                        <li>Comprendre l'architecture des bases de données spatiales</li>
                        <li>Maîtriser les opérations spatiales avancées avec PostGIS</li>
                        <li>Optimiser les performances des requêtes spatiales</li>
                    </ul>
                </div>

                <div class="glass rounded-xl p-6 border border-white/10 mb-6">
                    <h3 class="text-xl font-semibold mb-3 text-white">15.1. Introduction à PostgreSQL/PostGIS</h3>
                    <p class="text-white/90 mb-4">PostgreSQL est un système de gestion de base de données relationnelle (SGBD) open-source, étendu par PostGIS pour le support des données spatiales.</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="border border-white/10 p-4 rounded-lg">
                            <h4 class="font-semibold text-sky-300 mb-2">🏗️ Avantages de PostGIS</h4>
                            <ul class="text-white/80 text-sm space-y-1">
                                <li>Support complet des standards OGC</li>
                                <li>Fonctions spatiales avancées</li>
                                <li>Indexation spatiale performante</li>
                                <li>Intégration avec QGIS</li>
                                <li>Gestion des grands jeux de données</li>
                            </ul>
                        </div>
                        <div class="border border-white/10 p-4 rounded-lg">
                            <h4 class="font-semibold text-sky-300 mb-2">📊 Types de Données</h4>
                            <ul class="text-white/80 text-sm space-y-1">
                                <li><code>GEOMETRY</code> - Type générique (2D/3D)</li>
                                <li><code>GEOGRAPHY</code> - Pour les calculs géodésiques</li>
                                <li><code>POINT</code>, <code>LINESTRING</code>, <code>POLYGON</code></li>
                                <li><code>MULTI*</code> versions des types ci-dessus</li>
                            </ul>
                        </div>
                    </div>

                    <h3 class="text-xl font-semibold mb-3 text-white mt-6">15.2. Connexion à PostgreSQL depuis QGIS</h3>
                    <p class="text-white/90 mb-4">Configuration de la connexion à une base de données PostgreSQL/PostGIS :</p>
                    
                    <ol class="list-decimal list-inside text-white/80 space-y-2 mb-4 ml-4">
                        <li>Ouvrez le <strong>Gestionnaire de sources de données</strong> (Ctrl+L)</li>
                        <li>Sélectionnez l'onglet <strong>PostgreSQL</strong></li>
                        <li>Cliquez sur <strong>Nouveau</strong> pour créer une connexion</li>
                        <li>Remplissez les informations de connexion :
                            <ul class="list-disc list-inside ml-6 mt-1 space-y-1">
                                <li>Nom : Un nom pour cette connexion</li>
                                <li>Service : (laisser vide)</li>
                                <li>Hôte : Adresse du serveur (localhost si local)</li>
                                <li>Port : 5432 (par défaut)</li>
                                <li>Base de données : Nom de votre base</li>
                                <li>Authentification : Identifiants de connexion</li>
                            </ul>
                        </li>
                        <li>Cochez <strong>Enregistrer le mot de passe</strong> si nécessaire</li>
                        <li>Testez la connexion puis cliquez sur <strong>OK</strong></li>
                    </ol>

                    <div class="note-box rounded-xl p-4 my-6">
                        <h4 class="font-semibold text-sky-300 mb-2">💡 Bonne Pratique : Schémas</h4>
                        <p class="text-white/80 text-sm">Organisez vos tables dans des schémas logiques (ex: <code>public</code> pour les données partagées, <code>import</code> pour les données brutes, <code>analysis</code> pour les résultats d'analyse).</p>
                    </div>

                    <h3 class="text-xl font-semibold mb-3 text-white mt-6">15.3. Requêtes Spatiales Avancées</h3>
                    <p class="text-white/90 mb-4">Exemples de requêtes spatiales puissantes avec PostGIS :</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="border border-white/10 p-4 rounded-lg">
                            <h4 class="font-semibold text-sky-300 mb-2">📏 Calcul de Distance</h4>
                            <pre class="bg-black/30 p-3 rounded-lg text-xs text-green-300 overflow-x-auto">
-- Distance entre deux points (en mètres)
SELECT ST_Distance(
    'SRID=4326;POINT(2.349 48.853)'::geography,
    'SRID=4326;POINT(2.361 48.859)'::geography
) AS distance_meters;</pre>
                        </div>
                        <div class="border border-white/10 p-4 rounded-lg">
                            <h4 class="font-semibold text-sky-300 mb-2">🔍 Points dans un rayon</h4>
                            <pre class="bg-black/30 p-3 rounded-lg text-xs text-green-300 overflow-x-auto">
-- Tous les points dans un rayon de 1km
SELECT * FROM points p
WHERE ST_DWithin(
    p.geom,
    'SRID=4326;POINT(2.349 48.853)'::geography,
    1000  -- 1km en mètres
);</pre>
                        </div>
                        <div class="border border-white/10 p-4 rounded-lg">
                            <h4 class="font-semibold text-sky-300 mb-2">🔄 Jointure Spatiale</h4>
                            <pre class="bg-black/30 p-3 rounded-lg text-xs text-green-300 overflow-x-auto">
-- Compter les points par polygone
SELECT p.id, p.nom, COUNT(*) as nb_points
FROM polygones p
LEFT JOIN points pt ON ST_Within(pt.geom, p.geom)
GROUP BY p.id, p.nom;</pre>
                        </div>
                        <div class="border border-white/10 p-4 rounded-lg">
                            <h4 class="font-semibold text-sky-300 mb-2">📊 Agrégation Spatiale</h4>
                            <pre class="bg-black/30 p-3 rounded-lg text-xs text-green-300 overflow-x-auto">
-- Créer un tableau de bord par commune
SELECT 
    c.nom,
    COUNT(p.*) as nb_amenities,
    ST_Area(c.geom::geography) / 10000 as surface_ha
FROM communes c
LEFT JOIN points p ON ST_Within(p.geom, c.geom)
GROUP BY c.id, c.nom, c.geom
ORDER BY nb_amenities DESC;</pre>
                        </div>
                    </div>

                    <h3 class="text-xl font-semibold mb-3 text-white mt-6">15.4. Optimisation des Performances</h3>
                    <p class="text-white/90 mb-4">Techniques pour améliorer les performances de vos requêtes spatiales :</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="border border-white/10 p-4 rounded-lg">
                            <h4 class="font-semibold text-sky-300 mb-2">⚡ Indexation Spatiale</h4>
                            <pre class="bg-black/30 p-3 rounded-lg text-xs text-green-300 overflow-x-auto">
-- Créer un index spatial
CREATE INDEX idx_points_geom ON points USING GIST(geom);

-- Vérifier l'utilisation de l'index
EXPLAIN ANALYZE 
SELECT * FROM points 
WHERE ST_DWithin(geom, 'SRID=4326;POINT(2.349 48.853)', 1000);</pre>
                            <p class="text-white/70 text-xs mt-2">Les index GIST sont essentiels pour les requêtes spatiales performantes.</p>
                        </div>
                        <div class="border border-white/10 p-4 rounded-lg">
                            <h4 class="font-semibold text-sky-300 mb-2">📦 Partitionnement</h4>
                            <pre class="bg-black/30 p-3 rounded-lg text-xs text-green-300 overflow-x-auto">
-- Créer une table partitionnée par région
CREATE TABLE points (
    id SERIAL,
    geom GEOMETRY(Point, 4326),
    region_id INTEGER,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    PRIMARY KEY (id, region_id)
) PARTITION BY LIST (region_id);

-- Créer des partitions pour chaque région
CREATE TABLE points_reg1 PARTITION OF points 
    FOR VALUES IN (1) TABLESPACE fast_ssd;
CREATE TABLE points_reg2 PARTITION OF points 
    FOR VALUES IN (2) TABLESPACE archive_hdd;</pre>
                            <p class="text-white/70 text-xs mt-2">Idéal pour les très grandes tables (>10M d'enregistrements).</p>
                        </div>
                    </div>
                </div>

                <div class="exercise-box rounded-xl p-6">
                    <h3 class="font-semibold mb-3 text-emerald-300">🏋️ Exercice Pratique 12</h3>
                    <p class="text-white/90 mb-4">Avec une base de données contenant :</p>
                    <ul class="list-disc list-inside text-white/80 text-sm space-y-1 mb-4">
                        <li><code>communes</code> : Polygones des communes avec population</li>
                        <li><code>commerces</code> : Points des commerces avec catégorie</li>
                        <li><code>reseaux</code> : Lignes du réseau routier</li>
                    </ul>
                    <ol class="list-decimal list-inside text-white/90 space-y-2">
                        <li>Créez une vue matérialisée qui calcule pour chaque commune :
                            <ul class="list-disc list-inside ml-6 mt-1 space-y-1">
                                <li>Le nombre de commerces par catégorie</li>
                                <li>La longueur totale du réseau routier</li>
                                <li>La densité de population (hab/km²)</li>
                            </ul>
                        </li>
                        <li>Créez un index spatial sur chaque table</li>
                        <li>Écrivez une requête qui identifie les 10 communes avec le meilleur ratio commerces/habitant</li>
                        <li>Créez une vue qui agrège ces données par département</li>
                    </ol>
                    <p class="text-white/70 text-sm mt-3">💡 <strong>Indice</strong> : Utilisez des CTE (WITH) pour organiser des requêtes complexes et des vues matérialisées pour les résultats fréquemment interrogés.</p>
                </div>

                <div class="mt-8 flex justify-between">
                    <button onclick="prevModule()" class="px-4 py-2 border border-white/20 hover:bg-white/10 rounded-lg">← Module 14</button>
                    <button onclick="nextModule()" class="px-6 py-2 bg-emerald-500 hover:bg-emerald-400 text-black font-semibold rounded-lg">Conclusion →</button>
                </div>
            </section>

            <!-- Conclusion -->
            <section id="conclusion" class="module-content max-w-4xl">
                <h1 class="text-3xl font-bold mb-2">Félicitations ! 🎉</h1>
                <div class="glass rounded-2xl p-8 mb-8 text-center">
                    <div class="text-6xl mb-6">🏆</div>
                    <h2 class="text-2xl font-bold text-white mb-4">Vous avez terminé la formation QGIS Niveau 3 !</h2>
                    <p class="text-white/90 mb-6">Vous maîtrisez désormais des compétences avancées en analyse spatiale, automatisation et gestion de données géographiques.</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="bg-white/5 p-4 rounded-xl border border-white/10">
                            <div class="text-3xl mb-2">🚀</div>
                            <h3 class="font-semibold text-sky-300 mb-2">Automatisation</h3>
                            <p class="text-white/80 text-sm">Maîtrise du modélisateur graphique pour des flux de travail reproductibles</p>
                        </div>
                        <div class="bg-white/5 p-4 rounded-xl border border-white/10">
                            <div class="text-3xl mb-2">🔍</div>
                            <h3 class="font-semibold text-sky-300 mb-2">Analyse Avancée</h3>
                            <p class="text-white/80 text-sm">Techniques d'analyse spatiale complexes et traitements raster</p>
                        </div>
                        <div class="bg-white/5 p-4 rounded-xl border border-white/10">
                            <div class="text-3xl mb-2">🗃️</div>
                            <h3 class="font-semibold text-sky-300 mb-2">Gestion de Données</h3>
                            <p class="text-white/80 text-sm">Optimisation des bases de données spatiales avec PostGIS</p>
                        </div>
                    </div>

                    <div class="bg-gradient-to-r from-purple-900/50 to-blue-900/50 p-6 rounded-xl mb-8 text-left">
                        <h3 class="text-xl font-semibold text-white mb-4">Prochaines Étapes</h3>
                        <ul class="space-y-3">
                            <li class="flex items-start">
                                <span class="text-emerald-400 mr-2">→</span>
                                <span class="text-white/90">Partagez vos projets sur <a href="https://qgis.org/fr/site/" target="_blank" class="text-sky-300 hover:underline">le portail QGIS</a> ou <a href="https://github.com/" target="_blank" class="text-sky-300 hover:underline">GitHub</a></span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-emerald-400 mr-2">→</span>
                                <span class="text-white/90">Participez à la communauté <a href="https://www.osgeo.org/" target="_blank" class="text-sky-300 hover:underline">OSGeo</a> et aux événements locaux</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-emerald-400 mr-2">→</span>
                                <span class="text-white/90">Explorez des extensions avancées comme <a href="https://plugins.qgis.org/plugins/" target="_blank" class="text-sky-300 hover:underline">les plugins QGIS</a></span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-emerald-400 mr-2">→</span>
                                <span class="text-white/90">Consultez la <a href="https://docs.qgis.org/3.28/fr/docs/user_manual/" target="_blank" class="text-sky-300 hover:underline">documentation officielle</a> pour aller plus loin</span>
                            </li>
                        </ul>
                    </div>

                    <div class="bg-black/30 p-6 rounded-xl border border-white/10">
                        <h3 class="text-xl font-semibold text-white mb-4">Votre Avis Compte !</h3>
                        <p class="text-white/80 mb-4">Aidez-nous à améliorer cette formation en partageant votre expérience :</p>
                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                            <a href="#" class="px-6 py-3 bg-emerald-500 hover:bg-emerald-400 text-black font-semibold rounded-lg text-center">Laisser un avis</a>
                            <a href="#" class="px-6 py-3 border border-white/20 hover:bg-white/10 rounded-lg text-center">Signaler un problème</a>
                            <a href="#" class="px-6 py-3 border border-white/20 hover:bg-white/10 rounded-lg text-center">Suggérer une amélioration</a>
                        </div>
                    </div>
                </div>

                <div class="text-center mt-12">
                    <p class="text-white/70 mb-8">Merci d'avoir suivi cette formation. N'oubliez pas de pratiquer régulièrement pour consolider vos compétences !</p>
                    <a href="page_acceuil.html" class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold rounded-lg transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                        </svg>
                        Retour à l'accueil
                    </a>
                </div>
            </section>

            <!-- Add more module sections here -->

        </main>
    </div>

    <script>
        // Module navigation
        const modules = ['intro', 'module11', 'module12', 'module13', 'module14', 'module15', 'conclusion'];
        let currentModuleIndex = 0;
        const totalModules = modules.length - 1; // Excluding intro

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Set up navigation items
            document.querySelectorAll('.nav-item').forEach((item, index) => {
                item.addEventListener('click', () => {
                    showModule(modules[index]);
                    currentModuleIndex = index;
                    updateNavigation();
                });
            });

            // Show the first module
            showModule(modules[0]);
            updateNavigation();
        });

        // Navigation functions
        function nextModule() {
            if (currentModuleIndex < modules.length - 1) {
                currentModuleIndex++;
                showModule(modules[currentModuleIndex]);
                updateNavigation();
            }
        }

        function prevModule() {
            if (currentModuleIndex > 0) {
                currentModuleIndex--;
                showModule(modules[currentModuleIndex]);
                updateNavigation();
            }
        }

        function showModule(moduleId) {
            // Hide all modules
            document.querySelectorAll('.module-content').forEach(el => {
                el.classList.remove('active');
            });
            
            // Show the selected module
            const moduleElement = document.getElementById(moduleId);
            if (moduleElement) {
                moduleElement.classList.add('active');
                
                // Update active nav item
                document.querySelectorAll('.nav-item').forEach((item, index) => {
                    if (modules[index] === moduleId) {
                        item.classList.add('active');
                        item.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    } else {
                        item.classList.remove('active');
                    }
                });

                // Update current module display
                const moduleTitle = moduleElement.querySelector('h1, h2, h3').textContent;
                document.getElementById('current-module').textContent = moduleTitle;
                
                // Update progress
                updateProgress();
            }
        }

        function updateNavigation() {
            // Update previous/next button states
            const prevButton = document.querySelector('button[onclick="prevModule()"]');
            const nextButton = document.querySelector('button[onclick="nextModule()"]');
            
            if (prevButton) {
                prevButton.disabled = currentModuleIndex === 0;
            }
            
            if (nextButton) {
                nextButton.textContent = currentModuleIndex === modules.length - 2 ? 'Conclusion →' : 
                                       currentModuleIndex === modules.length - 1 ? 'Terminé' : 
                                       `Module ${11 + currentModuleIndex - 1} →`;
                nextButton.disabled = currentModuleIndex === modules.length - 1;
            }
        }

        function updateProgress() {
            // Calculate progress percentage
            const progress = (currentModuleIndex / (modules.length - 1)) * 100;
            
            // Update progress bar
            const progressBar = document.getElementById('progress-bar');
            const sidebarProgress = document.getElementById('sidebar-progress');
            const completedCount = document.getElementById('completed-count');
            
            if (progressBar) progressBar.style.width = `${progress}%`;
            if (sidebarProgress) sidebarProgress.style.width = `${progress}%`;
            if (completedCount) completedCount.textContent = Math.floor(progress / 100 * 6);
            
            // Update module completion in sidebar
            document.querySelectorAll('.nav-item').forEach((item, index) => {
                if (index < currentModuleIndex) {
                    item.classList.add('completed');
                } else if (index === currentModuleIndex) {
                    item.classList.add('active');
                    item.classList.remove('completed');
                } else {
                    item.classList.remove('active', 'completed');
                }
            });
        }

        // Make functions available globally
        window.nextModule = nextModule;
        window.prevModule = prevModule;
    </script>
</body>
</html>
